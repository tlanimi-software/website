<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioEra™ - Home</title>
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Firebase CDN -->
    <script type="module" src="firebase.js"></script>
    <!-- Fonts and colors -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <!-- <link rel="stylesheet" href="/assets/css/main.css"> -->
     <link rel="stylesheet" href="./assets/css/main.css">
    <style>
        .dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }
        .dialog button {
            margin-top: 10px;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Website header with navigation menu -->
    <header>
        <div class="header-content">
            <div>
                <img id="bioera-logo" src="./assets/images/bioera_logo_black.png" alt="BioEra Logo">
                <p class="header-subtitle">Play, Learn, Collect!</p>
            </div>
            <nav class="nav-menu">
                <a href="home.html">Home</a>
                <a href="submit_firebase.html">Events</a>
                <a href="#">Store</a>
                <a href="learn-more.html">About</a>
            </nav>
            <div class="shopping-cart">
                <a href="#" onclick="toggleCart(event)"><i class="fas fa-cart-shopping"></i></a>
                <div id="cart">
                    <h3>Cart</h3>
                    <p>Your cart is empty.</p>
                </div>
            </div>
        </div>
    </header>
    <!-- Section 1: BioEra intro with purpose statement -->
    <section class="section purpose-section">
        <div class="purpose-image">
            <img src="images/kickstart_promo.png" alt="Promo Picture KST">
        </div>
        <div class="purpose-content">
            <p id="purpose-title">Play BioEra™</p>
            <p class="purpose-subtitle">BioEra™ rewards the curiosity of young minds through an engaging card game <br> that makes learning about nature fun.</p>
        </div>
    </section>

    <!-- Section 2: Introduction to the game -->
    <div class="section" id="section-two">
        <p id="purpose-title" style="text-align: center; padding: 2rem;">Build an ecosystem and win!</p>
        <section class="section purpose-section" style="padding: 0;">
            <div class="purpose-content">
                <h1 style="padding-top: 1rem; font-weight: 600;">Know your cards</h1>
                <img src="images/know_your_cards(1).png" alt="Section 2 Image 1">
                <p style="padding: 1rem;">There are two kinds of cards: Lifeforms and Phenomena.</p>
                <div id="learn-more">
                    <a href="know_your_cards.html" class="button">Learn More</a>
                </div>
            </div>
        </section>
        <section class="section purpose-section" style="padding: 0;">
            <div class="purpose-content">
                <h2 style="padding-top: 1rem; font-weight: 600;">Ecosystem Rules</h2>
                <img src="images/ecosystem.png" alt="Section 2 Image 1">
                <p style="padding: 1rem;">Build your wildlife and create a long lasting ecosystem.</br></p>
                <div id="learn-more">
                    <a href="learn-more.html" class="button" style="background: #FEA236;">Explore</a>
                </div>
            </div>
        </section>
    </div>
    
    <!-- Section 3: Learn by interaction -->
    <section class="section purpose-section" style="background-color: unset;">
        <div class="purpose-content">
            <p id="purpose-title" style="margin:0rem auto 0rem auto;">One deck, one continent</p>
            <p class="purpose-subtitle" style="padding: 0 0 2rem 0;">Pick a deck from one of the seven continents to play your opponent.</p>
            <div id="continent-section">
                <div id="globe-container"></div>
                <div id="continent-buttons">
                    <button class="continent-btn" data-continent="Africa">Africa</button>
                    <button class="continent-btn" data-continent="Antarctica">Antarctica</button>
                    <button class="continent-btn" data-continent="Asia">Asia</button>
                    <button class="continent-btn" data-continent="Australia">Australia</button>
                    <button class="continent-btn" data-continent="Europe">Europe</button>
                    <button class="continent-btn" data-continent="North America">North America</button>
                    <button class="continent-btn" data-continent="South America">South America</button>
                </div>
            </div>
            <p class="purpose-subtitle" style="padding: 0 0 2rem 0;">Which continent would you like to play? Click on one of the buttons</p>

        </div>
    </section>

    <!-- Subscribe promotion -->
    <div id="promo-wrapper">
        <section id="promo" style="align-items: start;">
        <div>
            <p id="purpose-title" style="color: rgb(255, 255, 255);">BioEra™ is almost here</p>
            <p style="color: rgba(255, 255, 255, 0.785);">Reserve Your BioEra™ Spot: Unlock Launch Perks & Preorder Exclusives!</p>
            <div class="space-y-4">
                <input id="email" name="email" placeholder="Your Email" type="text" required style="width: 50%; padding: 0.5rem; border-radius: 5px; border: 1px solid #cccccc00; font-family: 'Lexend', sans-serif; color: black;" />
                <button onclick="submitEmail()" class="bg-green-700 text-white p-3 rounded hover:bg-blue-600" style="padding: 10px 25px 10px 25px; margin-left: 2rem;">Submit</button>
            </div>
            <p id="message" class="mt-4 text-left"></p>
        </div>
        </section>
        <div class="social-media">
            <a href="https://www.facebook.com/profile.php?id=61576220156109" target="_blank"><i class="fab fa-facebook-f" style="padding-right: 10px;"></i></a>
            <a href="https://www.instagram.com/bioeragame/" target="_blank"><i class="fab fa-instagram" style="padding-right: 10px;"></i></a>
            <a href="https://www.youtube.com/@BioEraGame" target="_blank"><i class="fab fa-youtube" style="padding-right: 10px;"></i></a>
            <a href="https://x.com/BioEraGame" target="_blank"><i class="fab fa-x-twitter" style="padding-right: 10px;"></i></a>
            <a href="https://www.tiktok.com/@bioeragame?lang=en" target="_blank"><i class="fa-brands fa-tiktok" style="padding-right: 10px;"></i></a>

        </div>
        <p style="font-size: 0.8rem; padding-top: 0.8rem; color: rgba(255, 255, 255, 0.637);">By clicking the subscribe you accept out Terms and Condicions and Policy Privacy</p>
    </div>

    <section class="section purpose-section">
        <div class="purpose-content">
            <p id="purpose-title" style="padding-top: 2rem;">Our Mission</p>
            <p class="purpose-subtitle">BioEra’s mission is to spark curiosity and foster a deeper connection with nature </br>through an exciting, educational card game that immerses kids, friends and families </br>in the wonders of global ecosystems and their history.</p>
            <img src="images/kickstarter-kids.png" alt="Promo Picture KST">
        </div>
    </section>
    <div id="footer-wrapper">
            <div id="copyright">
                <p>© 2025 Tlanimi. All rights reserved. | Santa Clara, CA 95050, USA</p>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r172/three.min.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        function toggleCart(event) {
            event.preventDefault();
            const cart = document.getElementById('cart');
            cart.style.display = cart.style.display === 'block' ? 'none' : 'block';
        }
    
        function closeDialog() {
            document.getElementById('continent-dialog').style.display = 'none';
        }
    
        // Three.js code for 3D globe with arrows and dialogs
        (function () {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(62, window.innerWidth / 385, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth * 0.8, 355); // Match container height
            renderer.setClearColor(0x000000, 0);
            document.getElementById('globe-container').appendChild(renderer.domElement);
    
            // Globe
            const geometry = new THREE.SphereGeometry(5, 64, 64);
            const textureLoader = new THREE.TextureLoader();
            const material = new THREE.MeshStandardMaterial({
                map: textureLoader.load('./assets/images/globe.jpg', undefined, (error) => {
                    console.error('Texture loading error:', error);
                    // Fallback to solid color if texture fails
                    material.map = null;
                    material.color = new THREE.Color(0x0000ff);
                    material.needsUpdate = true;
                }),
                roughness: 0.7,
                metalness: 0.1
            });
    
            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
    
            // Add arrows for Africa
            const arrowPositions = [
                { lat: 0, lon: 20, info: "Central Africa: Rich biodiversity with rainforests and savannas." },
                { lat: -30, lon: 25, info: "South Africa: Home to diverse wildlife like lions and elephants." }
            ];
    
            const arrows = [];
            arrowPositions.forEach(pos => {
                const arrowGeometry = new THREE.ConeGeometry(0.3, 1.0, 32); // Larger arrow
                const arrowMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
                const arrow = new THREE.Mesh(arrowGeometry, arrowMaterial);
                
                // Convert lat/lon to 3D coordinates
                const phi = (90 - pos.lat) * Math.PI / 180;
                const theta = (pos.lon + 180) * Math.PI / 180;
                const radius = 5.3; // Further from surface for visibility
                arrow.position.set(
                    radius * Math.sin(phi) * Math.cos(theta),
                    radius * Math.cos(phi),
                    radius * Math.sin(phi) * Math.sin(theta)
                );
                
                // Orient arrow
                arrow.lookAt(arrow.position.clone().multiplyScalar(2));
                arrow.rotateX(Math.PI / 2);
                arrow.userData = { info: pos.info };
                scene.add(arrow);
                arrows.push(arrow);
                console.log('Arrow added at position:', arrow.position); // Debug
            });
    
            camera.position.z = 10;
    
            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 5, 10);
            scene.add(directionalLight);
    
            // Raycasting for clicks
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
    
            function onClick(event) {
                event.preventDefault();
                const rect = renderer.domElement.getBoundingClientRect();
                // Account for canvas offset
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
    
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(arrows);
                console.log('Click detected, intersects:', intersects.length); // Debug
    
                if (intersects.length > 0) {
                    const dialog = document.getElementById('continent-dialog');
                    document.getElementById('dialog-title').textContent = "Africa";
                    document.getElementById('dialog-content').textContent = intersects[0].object.userData.info;
                    dialog.style.display = 'block';
                    console.log('Dialog opened with info:', intersects[0].object.userData.info); // Debug
                }
            }
    
            renderer.domElement.addEventListener('click', onClick);
    
            function animate() {
                requestAnimationFrame(animate);
                earth.rotation.y += 0.005;
                arrows.forEach(arrow => {
                    arrow.rotation.z += 0.01; // Gentle rotation
                });
                renderer.render(scene, camera);
            }
            animate();
    
            // Resize handler
            window.addEventListener('resize', () => {
                const width = window.innerWidth * 0.78;
                const height = 385;
                renderer.setSize(width, height);
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
            });
    
            // Drag controls
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
    
            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
    
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaMove = {
                        x: e.clientX - previousMousePosition.x,
                        y: e.clientY - previousMousePosition.y
                    };
                    earth.rotation.y += deltaMove.x * 0.005;
                    earth.rotation.x += deltaMove.y * 0.005;
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                }
            });
    
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
    
            // Touch controls
            renderer.domElement.addEventListener('touchstart', (e) => {
                if (e.touches.length === 1) {
                    isDragging = true;
                    previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                }
            });
    
            document.addEventListener('touchmove', (e) => {
                if (isDragging && e.touches.length == 1) {
                    const deltaMove = {
                        x: e.touches[0].clientX - previousMousePosition.x,
                        y: e.touches[0].clientY - previousMousePosition.y
                    };
                    earth.rotation.y += deltaMove.x * 0.005;
                    earth.rotation.x += deltaMove.y * 0.005;
                    previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                }
            });
    
            document.addEventListener('touchend', () => {
                isDragging = false;
            });
        })();
        // Continent center coordinates (approximate longitude for rotation)
    const continentCoordinates = {
        'Africa': { lon: 20, lat: 0 },
        'Antarctica': { lon: 0, lat: -90 },
        'Asia': { lon: 100, lat: 30 },
        'Australia': { lon: 135, lat: -25 },
        'Europe': { lon: 10, lat: 50 },
        'North America': { lon: -100, lat: 40 },
        'South America': { lon: -60, lat: -15 }
    };

    // Function to rotate globe to a specific continent
    function focusContinent(lon, lat) {
        const phi = (90 - lat) * Math.PI / 180;
        const theta = (lon + 180) * Math.PI / 180;
        const targetRotationY = -theta + Math.PI; // Adjust for Three.js coordinate system
        const targetRotationX = phi - Math.PI / 2;

        // Smooth rotation animation
        const animateRotation = () => {
            const speed = 0.05; // Animation speed
            earth.rotation.y += (targetRotationY - earth.rotation.y) * speed;
            earth.rotation.x += (targetRotationX - earth.rotation.x) * speed;

            // Stop when close to target
            if (Math.abs(earth.rotation.y - targetRotationY) < 0.01 &&
                Math.abs(earth.rotation.x - targetRotationX) < 0.01) {
                earth.rotation.y = targetRotationY;
                earth.rotation.x = targetRotationX;
            } else {
                requestAnimationFrame(animateRotation);
            }
        };
        animateRotation();
    }

    // Add click event listeners to continent buttons
    document.querySelectorAll('.continent-btn').forEach(button => {
        button.addEventListener('click', () => {
            const continent = button.dataset.continent;
            const { lon, lat } = continentCoordinates[continent];
            focusContinent(lon, lat);

            // Optionally update dialog for the continent
            const dialog = document.getElementById('continent-dialog');
            document.getElementById('dialog-title').textContent = continent;
            document.getElementById('dialog-content').textContent = `Explore the biodiversity of ${continent}!`;
            dialog.style.display = 'block';
        });
    });
    </script>
</body>
</html>